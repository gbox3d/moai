# imu 유니티 예제

## 예제 설명

유니티엔진은 씬별로 에제를 정리하였다.

mp6050_packet_monitor 패킷을 읽어서 출력해주는 기본적인 예제이다.  
mp6050_correct 예제는 논리적 오차 보정을 위한 예제이다.  

### mp6050 오차보정  

여기서는 하드웨적으로 보정을 하지 않고, 소프트웨어적으로 보정을 합니다.  
센서측 펌웨어에서 보정을 하지 않고, 게임엔진 상에서 (유니티) 소프트웨어적으로 보정하는 방법을 제시합니다.    

**오차 보정의 필요성**
IMU(Inertial Measurement Unit) 센서는 회전 및 가속도 데이터를 제공하지만, 센서의 정밀도, 환경적 요인, 센서의 물리적 위치 등으로 인해 오차가 발생할 수 있습니다. 이 오차는 가상 환경 내에서의 객체 회전과 실제 센서의 물리적 회전 사이에 불일치를 야기합니다. 따라서, 이 오차를 보정하는 것이 중요합니다.

**오차 보정 방법**

IMU 데이터 수신 및 초기 회전 값 설정:

IMU 센서에서 회전 데이터(쿼터니온)를 UDP 통신을 통해 수신합니다.
수신된 쿼터니온 데이터는 mImuRotation 변수에 저장되어, IMU 센서의 현재 회전 상태를 나타냅니다.

보정 대상 오브잭트 :

보정대상 오브잭트를 이용하여 보정을 위한 기준을 잡습니다.  
imuObject_Corrected 오브젝트는 현재 센서값이 오차에의해 틀어져 있을경우 정확한 회전을 보정하기 위한 목표 회전 값을 나타냅니다. 이 오브잭트는 실재 물리적인 정확한 회전 값이라고 가정하고, 이를 기준으로 IMU 센서의 오차를 보정합니다.  

델타 회전(보정 값) 계산:

사용자가 리셋 버튼을 누르면, imuObject_Corrected의 회전(target)과 현재 IMU 센서의 회전(mImuRotation) 사이의 차이를 계산합니다.
이 차이(mDeltaRotation)는 target 회전에서 mImuRotation을 빼서 얻습니다: mDeltaRotation = target * Quaternion.Inverse(mImuRotation).
계산된 mDeltaRotation은 IMU 데이터의 오차를 보정하는 데 사용됩니다.

보정된 회전 적용:

IMU 데이터를 수신할 때마다, mImuRotation에 mDeltaRotation을 곱하여 최종 회전 값을 얻습니다.  
이 최종 회전 값은 imuObject_Ypr 오브젝트에 적용되어, 보정된 회전을 반영합니다.

좀더 자세한 내용은 다음 문서를 참고 하세요.  
[IMU 보정]()

